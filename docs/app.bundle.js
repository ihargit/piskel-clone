!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=43)}([function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}var s;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var r,i,o={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),l=null,c=0,d=[],p=n(14);function u(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(w(r.parts[s],t))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(w(r.parts[s],t));o[r.id]={id:r.id,refs:1,parts:a}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function m(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertAt.before,n);n.insertBefore(t,i)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return f(t,e.attrs),m(e,t),t}function f(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function w(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var s=c++;n=l||(l=g(t)),r=y.bind(null,n,s,!1),i=y.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",f(t,e.attrs),m(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=p(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,t),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){v(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return u(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var s=n[i];(a=o[s.id]).refs--,r.push(a)}e&&u(h(e,t),t);for(i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete o[a.id]}}}};var b,x=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}},function(e,t,n){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports='<li class="preview-tile selected" data-tile-number="0">\n  <div class="canvas-container">\n    <div class="canvas-background"></div>\n    <canvas width="96" height="96" class="tile-view"></canvas>\n    <button rel="tooltip" data-placement="right" data-tile-action="delete"\n            class="tile-overlay delete-frame-action icon-frame-recyclebin-white"\n            style="display: block;" data-original-title="Delete this frame"></button>\n    <button rel="tooltip" data-placement="right" data-tile-action="clone"\n            class="tile-overlay duplicate-frame-action icon-frame-duplicate-white"\n            data-original-title="Duplicate this frame"></button>\n  </div>\n</li>\n'},function(e,t){e.exports='<div class="drawing-canvas-container">\n  <div class="canvas-background"></div>\n</div>\n'},function(e,t){e.exports='<header class="header">\n  <div class="navigation">\n    <h1 class="player-name">Piskel clone</h1>\n  </div>\n</header>\n\n<main class="main">\n  <div class="sticky-section left-sticky-section" id="tool-section">\n    <div class="sticky-section-wrap">\n      <div class="vertical-center"></div>\n    </div>\n  </div>\n  <div class="columns">\n    <div class="column left-column"></div>\n    <div class="column main-column"></div>\n    <div class="column right-column"></div>\n  </div>\n  <div class="sticky-section right-sticky-section" id="tooltip">\n    <div class="sticky-section-wrap">\n      <div class="settings-icons"></div>\n      <div class="drawer"></div>\n    </div>\n  </div>\n</main>\n'},function(e,t){e.exports='<ul class="tools-wrapper">\n\x3c!--  <li id="tool-paint-bucket" class="tool-icon icon-tool-paint-bucket"></li>--\x3e\n  <li id="tool-pen" class="tool-icon icon-tool-pen selected" data-tool-id="tool-pen"></li>\n  <li id="tool-vertical-mirror-pen" class="tool-icon icon-tool-vertical-mirror-pen" data-tool-id="tool-vertical-mirror-pen"></li>\n  <li id="tool-stroke" class="tool-icon icon-tool-stroke" data-tool-id="tool-stroke"></li>\n  <li id="tool-eraser" class="tool-icon icon-tool-eraser" data-tool-id="tool-eraser"></li>\n  <li id="tool-bucket" class="tool-icon icon-tool-paint-bucket" data-tool-id="tool-bucket"></li>\n  <li id="tool-solorswap" class="tool-icon icon-tool-colorswap" data-tool-id="tool-solorswap"></li>\n  <li id="tool-colorpicker" class="tool-icon icon-tool-colorpicker" data-tool-id="tool-colorpicker"></li>\n</ul>\n'},function(e,t){e.exports='<div class="preview-list-wrapper">\n  <div class="preview-list-scroller">\n    <ul class="preview-list">\n      <div class="add-frame-action">\n        <div class="add-frame-action-icon icon-frame-plus-white"></div>\n        <div class="label">Add new frame</div>\n      </div>\n    </ul>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="preview-container">\n  <div class="canvas-container-wrapper">\n    <div class="canvas-container">\n      <div class="preview-actions">\n        <div class="preview-fullscreen-icon"></div>\n      </div>\n      <div class="preview-canvas-container">\n        <div class="canvas-background"></div>\n        <div class="background-image-frame-container"></div>\n      </div>\n    </div>\n  </div>\n  <div>\n    <span id="display-fps" class="display-fps">12 FPS</span>\n    <input id="preview-fps" class="range-fps" type="range" min="0" max="24">\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="settings-section">\n  <div class="settings-title">Resize</div>\n  <div class="list">\n    <form class="form-resize" id="canvas-resize" name="formResize">\n      <label>\n        <input id=\'width32\' type="radio" name="canvasSize" value="32">\n        <span class="resize-caption">32x32</span>\n      </label><br>\n      <label>\n        <input id=\'width64\' type="radio" name="canvasSize" value="64">\n        <span class="resize-caption">64x64</span>\n      </label><br>\n      <label>\n        <input id=\'width128\' type="radio" name="canvasSize" value="128">\n        <span class="resize-caption">128x128</span>\n      </label><br>\n      <input type="submit" value="Resize" class="button">\n    </form>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="palette-wrapper">\n  <input id="color-primary" class="palette-icon palette-color-primary" type="color" name="color-primary" value="#000000">\n  <input id="color-secondary" class="palette-icon palette-color-secondary" type="color" name="color-secondary" value="#ffffff">\n  <div class="swap-color-button"></div>\n</div>\n'},function(e,t,n){var r=n(12);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(t=e.exports=n(0)(!1)).i(n(13),""),t.push([e.i,'html {\n  font-size: 10px; }\n\nbody {\n  background: #1d1d1d;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  cursor: default;\n  font-family: "Arial", sans-serif;\n  font-size: 1.1rem;\n  line-height: 1.1;\n  user-select: none; }\n\n.header {\n  z-index: 999;\n  position: relative;\n  font-size: 1.6rem; }\n  .header .navigation {\n    height: 3rem; }\n    .header .navigation .player-name {\n      position: absolute;\n      left: 0;\n      width: 100%;\n      text-align: center;\n      font-size: 16pt;\n      color: #888888;\n      text-shadow: 0 -1px 0 #000000; }\n\n.main {\n  position: fixed;\n  top: 0.5rem;\n  right: 0;\n  bottom: 0.5rem;\n  left: 0;\n  margin-top: 4rem; }\n  .main .sticky-section {\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    z-index: 1000; }\n  .main .left-sticky-section {\n    left: 0;\n    max-width: 10rem; }\n    .main .left-sticky-section .sticky-section-wrap {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%; }\n  .main .right-sticky-section {\n    right: 0;\n    width: 4.7rem;\n    transition: all 200ms ease-out; }\n    .main .right-sticky-section .sticky-section-wrap {\n      display: flex;\n      width: 326px;\n      justify-content: center;\n      align-items: center;\n      height: 100%; }\n  .main .expanded {\n    right: 280px; }\n  .main .columns {\n    text-align: center;\n    font-size: 0;\n    display: flex;\n    position: absolute;\n    left: 100px;\n    top: 0;\n    right: 50px;\n    bottom: 0; }\n    .main .columns .left-column {\n      vertical-align: top;\n      height: 100%;\n      padding-right: 7px;\n      flex-shrink: 0; }\n    .main .columns .main-column {\n      height: 100%;\n      width: 100%;\n      position: relative;\n      overflow: hidden; }\n    .main .columns .right-column {\n      box-sizing: border-box;\n      vertical-align: top;\n      height: 100%;\n      flex-shrink: 0;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n      padding-left: 10px;\n      padding-bottom: 20px; }\n\n.selected {\n  cursor: default;\n  background-color: #444444; }\n',""])},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,'/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\r\n\r\n/* Document\r\n   ========================================================================== */\r\n\r\n/**\r\n * 1. Correct the line height in all browsers.\r\n * 2. Prevent adjustments of font size after orientation changes in iOS.\r\n */\r\n\r\nhtml {\r\n  line-height: 1.15; /* 1 */\r\n  -webkit-text-size-adjust: 100%; /* 2 */\r\n}\r\n\r\n/* Sections\r\n   ========================================================================== */\r\n\r\n/**\r\n * Remove the margin in all browsers.\r\n */\r\n\r\nbody {\r\n  margin: 0;\r\n}\r\n\r\n/**\r\n * Render the `main` element consistently in IE.\r\n */\r\n\r\nmain {\r\n  display: block;\r\n}\r\n\r\n/**\r\n * Correct the font size and margin on `h1` elements within `section` and\r\n * `article` contexts in Chrome, Firefox, and Safari.\r\n */\r\n\r\nh1 {\r\n  font-size: 2em;\r\n  margin: 0.67em 0;\r\n}\r\n\r\n/* Grouping content\r\n   ========================================================================== */\r\n\r\n/**\r\n * 1. Add the correct box sizing in Firefox.\r\n * 2. Show the overflow in Edge and IE.\r\n */\r\n\r\nhr {\r\n  box-sizing: content-box; /* 1 */\r\n  height: 0; /* 1 */\r\n  overflow: visible; /* 2 */\r\n}\r\n\r\n/**\r\n * 1. Correct the inheritance and scaling of font size in all browsers.\r\n * 2. Correct the odd `em` font sizing in all browsers.\r\n */\r\n\r\npre {\r\n  font-family: monospace, monospace; /* 1 */\r\n  font-size: 1em; /* 2 */\r\n}\r\n\r\n/* Text-level semantics\r\n   ========================================================================== */\r\n\r\n/**\r\n * Remove the gray background on active links in IE 10.\r\n */\r\n\r\na {\r\n  background-color: transparent;\r\n}\r\n\r\n/**\r\n * 1. Remove the bottom border in Chrome 57-\r\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\r\n */\r\n\r\nabbr[title] {\r\n  border-bottom: none; /* 1 */\r\n  text-decoration: underline; /* 2 */\r\n  text-decoration: underline dotted; /* 2 */\r\n}\r\n\r\n/**\r\n * Add the correct font weight in Chrome, Edge, and Safari.\r\n */\r\n\r\nb,\r\nstrong {\r\n  font-weight: bolder;\r\n}\r\n\r\n/**\r\n * 1. Correct the inheritance and scaling of font size in all browsers.\r\n * 2. Correct the odd `em` font sizing in all browsers.\r\n */\r\n\r\ncode,\r\nkbd,\r\nsamp {\r\n  font-family: monospace, monospace; /* 1 */\r\n  font-size: 1em; /* 2 */\r\n}\r\n\r\n/**\r\n * Add the correct font size in all browsers.\r\n */\r\n\r\nsmall {\r\n  font-size: 80%;\r\n}\r\n\r\n/**\r\n * Prevent `sub` and `sup` elements from affecting the line height in\r\n * all browsers.\r\n */\r\n\r\nsub,\r\nsup {\r\n  font-size: 75%;\r\n  line-height: 0;\r\n  position: relative;\r\n  vertical-align: baseline;\r\n}\r\n\r\nsub {\r\n  bottom: -0.25em;\r\n}\r\n\r\nsup {\r\n  top: -0.5em;\r\n}\r\n\r\n/* Embedded content\r\n   ========================================================================== */\r\n\r\n/**\r\n * Remove the border on images inside links in IE 10.\r\n */\r\n\r\nimg {\r\n  border-style: none;\r\n}\r\n\r\n/* Forms\r\n   ========================================================================== */\r\n\r\n/**\r\n * 1. Change the font styles in all browsers.\r\n * 2. Remove the margin in Firefox and Safari.\r\n */\r\n\r\nbutton,\r\ninput,\r\noptgroup,\r\nselect,\r\ntextarea {\r\n  font-family: inherit; /* 1 */\r\n  font-size: 100%; /* 1 */\r\n  line-height: 1.15; /* 1 */\r\n  margin: 0; /* 2 */\r\n}\r\n\r\n/**\r\n * Show the overflow in IE.\r\n * 1. Show the overflow in Edge.\r\n */\r\n\r\nbutton,\r\ninput { /* 1 */\r\n  overflow: visible;\r\n}\r\n\r\n/**\r\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\r\n * 1. Remove the inheritance of text transform in Firefox.\r\n */\r\n\r\nbutton,\r\nselect { /* 1 */\r\n  text-transform: none;\r\n}\r\n\r\n/**\r\n * Correct the inability to style clickable types in iOS and Safari.\r\n */\r\n\r\nbutton,\r\n[type="button"],\r\n[type="reset"],\r\n[type="submit"] {\r\n  -webkit-appearance: button;\r\n}\r\n\r\n/**\r\n * Remove the inner border and padding in Firefox.\r\n */\r\n\r\nbutton::-moz-focus-inner,\r\n[type="button"]::-moz-focus-inner,\r\n[type="reset"]::-moz-focus-inner,\r\n[type="submit"]::-moz-focus-inner {\r\n  border-style: none;\r\n  padding: 0;\r\n}\r\n\r\n/**\r\n * Restore the focus styles unset by the previous rule.\r\n */\r\n\r\nbutton:-moz-focusring,\r\n[type="button"]:-moz-focusring,\r\n[type="reset"]:-moz-focusring,\r\n[type="submit"]:-moz-focusring {\r\n  outline: 1px dotted ButtonText;\r\n}\r\n\r\n/**\r\n * Correct the padding in Firefox.\r\n */\r\n\r\nfieldset {\r\n  padding: 0.35em 0.75em 0.625em;\r\n}\r\n\r\n/**\r\n * 1. Correct the text wrapping in Edge and IE.\r\n * 2. Correct the color inheritance from `fieldset` elements in IE.\r\n * 3. Remove the padding so developers are not caught out when they zero out\r\n *    `fieldset` elements in all browsers.\r\n */\r\n\r\nlegend {\r\n  box-sizing: border-box; /* 1 */\r\n  color: inherit; /* 2 */\r\n  display: table; /* 1 */\r\n  max-width: 100%; /* 1 */\r\n  padding: 0; /* 3 */\r\n  white-space: normal; /* 1 */\r\n}\r\n\r\n/**\r\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\r\n */\r\n\r\nprogress {\r\n  vertical-align: baseline;\r\n}\r\n\r\n/**\r\n * Remove the default vertical scrollbar in IE 10+.\r\n */\r\n\r\ntextarea {\r\n  overflow: auto;\r\n}\r\n\r\n/**\r\n * 1. Add the correct box sizing in IE 10.\r\n * 2. Remove the padding in IE 10.\r\n */\r\n\r\n[type="checkbox"],\r\n[type="radio"] {\r\n  box-sizing: border-box; /* 1 */\r\n  padding: 0; /* 2 */\r\n}\r\n\r\n/**\r\n * Correct the cursor style of increment and decrement buttons in Chrome.\r\n */\r\n\r\n[type="number"]::-webkit-inner-spin-button,\r\n[type="number"]::-webkit-outer-spin-button {\r\n  height: auto;\r\n}\r\n\r\n/**\r\n * 1. Correct the odd appearance in Chrome and Safari.\r\n * 2. Correct the outline style in Safari.\r\n */\r\n\r\n[type="search"] {\r\n  -webkit-appearance: textfield; /* 1 */\r\n  outline-offset: -2px; /* 2 */\r\n}\r\n\r\n/**\r\n * Remove the inner padding in Chrome and Safari on macOS.\r\n */\r\n\r\n[type="search"]::-webkit-search-decoration {\r\n  -webkit-appearance: none;\r\n}\r\n\r\n/**\r\n * 1. Correct the inability to style clickable types in iOS and Safari.\r\n * 2. Change font properties to `inherit` in Safari.\r\n */\r\n\r\n::-webkit-file-upload-button {\r\n  -webkit-appearance: button; /* 1 */\r\n  font: inherit; /* 2 */\r\n}\r\n\r\n/* Interactive\r\n   ========================================================================== */\r\n\r\n/*\r\n * Add the correct display in Edge, IE 10+, and Firefox.\r\n */\r\n\r\ndetails {\r\n  display: block;\r\n}\r\n\r\n/*\r\n * Add the correct display in all browsers.\r\n */\r\n\r\nsummary {\r\n  display: list-item;\r\n}\r\n\r\n/* Misc\r\n   ========================================================================== */\r\n\r\n/**\r\n * Add the correct display in IE 10+.\r\n */\r\n\r\ntemplate {\r\n  display: none;\r\n}\r\n\r\n/**\r\n * Add the correct display in IE 10.\r\n */\r\n\r\n[hidden] {\r\n  display: none;\r\n}\r\n',""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){var r=n(16);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(0)(!1);var r=n(2),i=r(n(17)),o=r(n(18)),s=r(n(19)),a=r(n(20)),l=r(n(21));t.push([e.i,".tools-wrapper {\n  list-style: none;\n  display: inline-block; }\n  .tools-wrapper .tool-icon {\n    float: left;\n    width: 46px;\n    height: 46px;\n    position: relative;\n    margin: 1px;\n    background-image: url("+i+');\n    background-color: #3a3a3a; }\n  .tools-wrapper .tool-icon.selected::before {\n    content: "";\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    border: 3px solid gold;\n    box-sizing: border-box; }\n  .tools-wrapper .tool-icon:hover {\n    background-color: #444444;\n    cursor: pointer; }\n  .tools-wrapper .icon-tool-paint-bucket {\n    background-position: -228px -92px; }\n  .tools-wrapper .icon-tool-pen {\n    background-position: -182px -92px; }\n  .tools-wrapper .icon-tool-eraser {\n    background-position: -46px -228px; }\n  .tools-wrapper .icon-tool-colorswap {\n    background-position: -228px -138px; }\n  .tools-wrapper .icon-tool-vertical-mirror-pen {\n    background-position: 0 -136px; }\n  .tools-wrapper .icon-tool-colorpicker {\n    background-position: -274px 0; }\n  .tools-wrapper .icon-tool-stroke {\n    background-position: -46px -136px; }\n\n.pen-cursor,\n.tool-vertical-mirror-pen,\n.icon-tool-stroke {\n  cursor: url('+o+"), auto; }\n\n.eraser-cursor {\n  cursor: url("+s+") 0 20, auto; }\n\n.bucket-cursor {\n  cursor: url("+a+") 0 20, auto; }\n\n.colorpicker-cursor {\n  cursor: url("+l+") 0 20, auto; }\n",""])},function(e,t,n){e.exports=n.p+"./images/icons.png"},function(e,t,n){e.exports=n.p+"./images/pen-cursor.png"},function(e,t,n){e.exports=n.p+"./images/eraser-cursor.png"},function(e,t,n){e.exports=n.p+"./images/bucket-cursor.png"},function(e,t,n){e.exports=n.p+"./images/color-picker.png"},function(e,t,n){var r=n(23);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(0)(!1);var r=n(2),i=r(n(24)),o=r(n(25));t.push([e.i,".preview-list-wrapper {\n  position: relative;\n  height: 100%;\n  overflow: hidden; }\n  .preview-list-wrapper .preview-list-scroller {\n    overflow-y: scroll;\n    overflow-x: hidden;\n    height: 100%; }\n    .preview-list-wrapper .preview-list-scroller .preview-list {\n      list-style-type: none;\n      padding-right: 9px;\n      padding-inline-start: 0; }\n      .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile {\n        position: relative;\n        border: #444444 3px solid;\n        border-radius: 3px;\n        margin: 5px 0;\n        width: 96px;\n        height: 96px; }\n        .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .selected {\n          border-color: gold; }\n        .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container {\n          position: static;\n          display: block; }\n          .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container .canvas-background {\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            background: url("+i+"); }\n          .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container .tile-view {\n            position: absolute;\n            z-index: 1;\n            margin-left: auto;\n            margin-right: auto;\n            left: 0;\n            right: 0;\n            top: 0; }\n          .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container .tile-view:hover {\n            cursor: grab; }\n          .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container .icon-frame-duplicate-white {\n            background-image: url("+o+");\n            background-position: -274px -76px;\n            width: 30px;\n            height: 30px; }\n          .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container .icon-frame-recyclebin-white {\n            background-image: url("+o+");\n            background-position: -274px -106px;\n            width: 30px;\n            height: 30px; }\n          .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container .duplicate-frame-action {\n            bottom: 0;\n            right: 0;\n            border-bottom-left-radius: 3px;\n            cursor: pointer; }\n          .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container .delete-frame-action {\n            top: 0;\n            right: 0;\n            border-bottom-left-radius: 3px;\n            cursor: pointer; }\n          .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile .canvas-container .tile-overlay {\n            z-index: 10;\n            position: absolute;\n            background-color: rgba(100, 100, 100, 0.6);\n            opacity: 1;\n            height: 30px;\n            width: 30px;\n            border: none; }\n      .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile:first-child {\n        margin-top: 0; }\n      .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile.selected {\n        border-color: gold; }\n      .preview-list-wrapper .preview-list-scroller .preview-list .preview-tile-drop-proxy {\n        border-color: gold;\n        background: rgba(250, 215, 0, 0.1);\n        border-style: dashed; }\n      .preview-list-wrapper .preview-list-scroller .preview-list .add-frame-action {\n        display: flex;\n        align-items: center;\n        margin-top: 8px;\n        padding: 6px 0;\n        overflow: hidden;\n        width: 96px;\n        border: #888888 solid 3px;\n        border-radius: 4px;\n        color: #888888;\n        background-color: #222222;\n        font-size: 13px;\n        cursor: pointer; }\n        .preview-list-wrapper .preview-list-scroller .preview-list .add-frame-action .add-frame-action-icon {\n          margin: 3px;\n          float: left;\n          flex-shrink: 0; }\n        .preview-list-wrapper .preview-list-scroller .preview-list .add-frame-action .icon-frame-plus-white {\n          background-image: url("+o+");\n          background-position: -274px -157px;\n          width: 26px;\n          height: 26px; }\n        .preview-list-wrapper .preview-list-scroller .preview-list .add-frame-action .label {\n          overflow: hidden;\n          text-align: left; }\n      .preview-list-wrapper .preview-list-scroller .preview-list .add-frame-action:hover {\n        border-color: gold; }\n",""])},function(e,t,n){e.exports=n.p+"./images/canvas-background.png"},function(e,t,n){e.exports=n.p+"./images/icons.png"},function(e,t,n){var r=n(27);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(0)(!1);var r=n(2)(n(28));t.push([e.i,".drawing-canvas-container {\n  position: relative;\n  display: block;\n  font-size: 0; }\n  .drawing-canvas-container .canvas-background {\n    background: url("+r+");\n    position: absolute;\n    margin-left: auto;\n    margin-right: auto;\n    left: 0;\n    right: 0;\n    top: 0; }\n  .drawing-canvas-container .drawing-canvas,\n  .drawing-canvas-container .helper-canvas {\n    position: absolute;\n    margin-left: auto;\n    margin-right: auto;\n    left: 0;\n    right: 0;\n    top: 0;\n    z-index: 9; }\n  .drawing-canvas-container .helper-canvas {\n    z-index: 8; }\n",""])},function(e,t,n){e.exports=n.p+"./images/canvas-background.png"},function(e,t,n){var r=n(30);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(0)(!1);var r=n(2),i=r(n(31)),o=r(n(32));t.push([e.i,".preview-container {\n  background: #333333;\n  border-radius: 0 0 2px 2px;\n  overflow: hidden;\n  flex-shrink: 0;\n  border: 0 solid black;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);\n  font-size: 0; }\n  .preview-container .canvas-container-wrapper {\n    height: 200px;\n    width: 200px;\n    overflow: hidden; }\n    .preview-container .canvas-container-wrapper .canvas-container {\n      height: 200px;\n      width: 200px;\n      margin: 0;\n      overflow: hidden;\n      position: relative;\n      display: block; }\n      .preview-container .canvas-container-wrapper .canvas-container .preview-actions {\n        position: absolute;\n        z-index: 500;\n        right: 10px;\n        top: 10px;\n        cursor: pointer;\n        border: 2px solid rgba(100, 100, 100, 0.6); }\n        .preview-container .canvas-container-wrapper .canvas-container .preview-actions .preview-fullscreen-icon {\n          width: 18px;\n          height: 18px;\n          background-image: url("+i+");\n          background-position: 0 0;\n          background-size: 18px 18px; }\n      .preview-container .canvas-container-wrapper .canvas-container .preview-actions:hover {\n        border-color: gold; }\n      .preview-container .canvas-container-wrapper .canvas-container .preview-canvas-container {\n        height: 200px;\n        width: 200px;\n        margin: 0; }\n        .preview-container .canvas-container-wrapper .canvas-container .preview-canvas-container .canvas-background {\n          background: url("+o+");\n          position: absolute;\n          top: 0;\n          right: 0;\n          bottom: 0;\n          left: 0; }\n        .preview-container .canvas-container-wrapper .canvas-container .preview-canvas-container .background-image-frame-container {\n          height: 100%;\n          width: 100%;\n          position: relative;\n          background-position: center; }\n  .preview-container .display-fps {\n    float: left;\n    color: #aaaaaa;\n    font-size: 12px;\n    min-width: 55px;\n    vertical-align: bottom;\n    line-height: 26px; }\n  .preview-container .range-fps {\n    overflow: hidden;\n    width: 100px;\n    height: 26px;\n    margin: 0;\n    box-sizing: border-box; }\n",""])},function(e,t,n){e.exports=n.p+"./images/resize.png"},function(e,t,n){e.exports=n.p+"./images/canvas-background.png"},function(e,t,n){var r=n(34);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(0)(!1);var r=n(2)(n(35));t.push([e.i,".settings-icons .settings-icon {\n  position: relative;\n  cursor: pointer;\n  width: 46px;\n  height: 46px;\n  margin: 0;\n  background-color: #3a3a3a; }\n\n.settings-icons .settings-icon:hover {\n  background-color: #444444; }\n\n.settings-icons .icon-settings-resize {\n  background-image: url("+r+");\n  background-position: -138px -182px; }\n\n.settings-icons .has-expanded-drawer {\n  border-left: 3px solid gold; }\n\n.drawer {\n  background-color: #444444;\n  height: 550px;\n  max-height: 100%;\n  width: 280px;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  box-shadow: 0 0 5px 0 black; }\n  .drawer .settings-section {\n    margin: 10px 20px;\n    font-size: 12px;\n    font-weight: bold;\n    color: #cccccc; }\n  .drawer .settings-title {\n    margin-top: 20px;\n    margin-bottom: 10px;\n    text-transform: uppercase;\n    border-bottom: 1px #aaaaaa solid;\n    padding-bottom: 5px;\n    color: gold; }\n  .drawer .button {\n    box-sizing: border-box;\n    height: 24px;\n    background-color: gold;\n    border-style: none;\n    border-radius: 2px;\n    cursor: pointer;\n    text-decoration: none;\n    color: black;\n    font-weight: bold;\n    font-size: 1.2rem;\n    text-align: center;\n    transition: background-color 0.2s linear;\n    margin-top: 1.5rem; }\n  .drawer .button:hover {\n    background-color: white; }\n",""])},function(e,t,n){e.exports=n.p+"./images/icons.png"},function(e,t,n){var r=n(37);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,".form-resize {\n  line-height: normal; }\n  .form-resize input {\n    vertical-align: middle;\n    margin: 10px auto; }\n  .form-resize label {\n    display: inline-block;\n    vertical-align: middle; }\n  .form-resize .resize-caption {\n    display: inline-block;\n    vertical-align: middle;\n    margin-left: 10px; }\n",""])},function(e,t,n){var r=n(39);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(0)(!1);var r=n(2)(n(40));t.push([e.i,".palette-wrapper {\n  margin-top: 10px;\n  margin-left: 10px; }\n  .palette-wrapper .palette-icon {\n    display: block;\n    position: relative;\n    padding: 0 2px;\n    cursor: pointer;\n    border-width: 0;\n    background-color: #3a3a3a;\n    width: 44px;\n    height: 46px; }\n  .palette-wrapper .palette-color-primary {\n    margin-top: 0;\n    z-index: 100; }\n  .palette-wrapper .palette-color-secondary {\n    z-index: 90;\n    margin-top: -18px;\n    margin-left: 30px; }\n  .palette-wrapper .swap-color-button {\n    width: 18px;\n    height: 18px;\n    margin-top: -22px;\n    margin-left: 4px;\n    background-image: url("+r+");\n    background-position: -274px -222px;\n    cursor: pointer;\n    opacity: 0.3; }\n  .palette-wrapper .swap-color-button:hover {\n    opacity: 1; }\n  .palette-wrapper .palette-icon:hover {\n    background-color: #444444; }\n",""])},function(e,t,n){e.exports=n.p+"./images/icons.png"},function(e,t,n){var r=n(42);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,".cursor-coordinates {\n  position: absolute;\n  bottom: 0;\n  color: gold;\n  font-size: 12px;\n  font-weight: bold;\n  font-family: monospace; }\n",""])},function(e,t,n){"use strict";n.r(t);var r=n(5),i=(n(11),n(6));n(15);class o{static htmlToDocFragment(e){const t=document.createElement("template");return t.innerHTML=e,t.content}static calculateZoom(e,t){let n=1;const r=document.querySelector(".main-column");if(r){const i=r.clientHeight,o=r.clientWidth;n=Math.floor(Math.min(i,o)/Math.min(e,t))}return n}static resizeCanvasBackground(e,t,n){const r=e;r.querySelector(".canvas-background").style.width=`${t}px`,r.querySelector(".canvas-background").style.height=`${n}px`}static reorderFrames(e,t,n){const r=e.frames.splice(t,1)[0];e.frames.splice(n,0,r),e.setCurrentFrame(n)}static renumberTiles(e,t){document.querySelectorAll(".preview-tile").forEach((n,r)=>{const i=n,o=Number(n.dataset.tileNumber);"more"===t&&o>e&&(i.dataset.tileNumber=`${o+1}`),"less"===t&&o>e&&(i.dataset.tileNumber=`${o-1}`),"reorder"===t&&(i.dataset.tileNumber=`${r}`)})}static deleteClassFromItems(e,t){document.querySelectorAll(`.${e}`).forEach(e=>{e.classList.remove(t)})}static redrawMainCanvas(e,t){const n=document.querySelector(".drawing-canvas"),r=document.querySelectorAll(`[data-tile-number='${t}']`)[0].querySelector(".tile-view"),i=n.getContext("2d");0!==e.frames[t]?(i.clearRect(0,0,n.width,n.height),i.drawImage(r,0,0,n.width,n.height)):i.clearRect(0,0,n.width,n.height)}static copyCanvasToPreview(e){const t=document.querySelector(".drawing-canvas"),n=document.querySelectorAll(`[data-tile-number='${e.getCurrentFrame()}']`)[0].querySelector(".tile-view").getContext("2d");n.imageSmoothingEnabled=!1,n.drawImage(t,0,0,96,96)}static changePreviewBackground(e){document.querySelector(".background-image-frame-container").style=`background-repeat: no-repeat; background-size: contain; background-image: url(${e})`}static calcStraightLine(e){const t=[];let{startX:n,startY:r}=e;const{endX:i,endY:o}=e,s=Math.abs(i-n),a=Math.abs(o-r),l=n<i?1:-1,c=r<o?1:-1;let d=s-a;for(t.push({x1:n,y1:r});n!==i||r!==o;){const e=2*d;e>-a&&(d-=a,n+=l),e<s&&(d+=s,r+=c),t.push({x1:n,y1:r})}return t}static drawCell(e,t,n,r){t.fillStyle=r,t.fillRect(e.x1*n,e.y1*n,n,n)}static fillPixels(e,t,n,r){e.forEach(e=>this.drawCell(e,t,n,r))}static eraseCell(e,t,n){t.clearRect(e.x1*n,e.y1*n,n,n)}static eraseLine(e,t,n){e.forEach(e=>this.eraseCell(e,t,n))}static hideSettingsPanel(e,t){(e.target.closest(".drawer")||e.target.closest(".settings-icons"))&&!0!==t||(document.querySelector(".has-expanded-drawer").classList.remove("has-expanded-drawer"),document.querySelector(".right-sticky-section").classList.remove("expanded"),document.removeEventListener("pointerup",o.hideSettingsPanel))}static nullXY(e){const t=e;t.prevX=void 0,t.prevY=void 0}static removeClassesWithRegex(e,t){for(let n=e.classList.length-1;n>0;n-=1)t.test(e.classList[n])&&e.classList.remove(e.classList[n])}static matchStartColor(e,t,n,r,i,o){const s=t.data[e],a=t.data[e+1],l=t.data[e+2],c=t.data[e+3];return s===n&&a===r&&l===i&&c===o}static colorPixel(e,t,n,r){const i=t;for(let t=0;t<n.zoom;t+=1)i.data[e+t]=r,i.data[e+1+t]=r,i.data[e+2+t]=r,i.data[e+3+t]=r,i.data[e+3+t]=r}static floodFill(e,t,n,r){const i=t.getImageData(n*e.zoom,r*e.zoom,1,1).data;let o=255;const[s,a,l,c]=[i[0],i[1],i[2],i[3]];c===o&&(o=200);const d=t.getImageData(0,0,e.width*e.zoom,e.width*e.zoom),p=[[n,r]],u=[];for(;p.length;){let t,n,r;const i=p.pop(),[h]=[i[0]];let[m]=[i[1]];for(t=4*(m*e.width*e.zoom*e.zoom+h*e.zoom);m>=0&&this.matchStartColor(t,d,s,a,l,c);)m-=1,t-=e.width*e.zoom*e.zoom*4;for(m+=1,t+=e.width*e.zoom*e.zoom*4,n=!1,r=!1;m+1<e.width+1&&this.matchStartColor(t,d,s,a,l,c);)u.push({x1:h,y1:m}),this.colorPixel(t,d,e,o),h>0&&(this.matchStartColor(t-4*e.zoom,d,s,a,l,c)?n||(p.push([h-1,m]),n=!0):n&&(n=!1)),h<e.width-1&&(this.matchStartColor(t+4*e.zoom,d,s,a,l,c)?r||(p.push([h+1,m]),r=!0):r&&(r=!1)),t+=e.width*e.zoom*e.zoom*4,m+=1}this.fillPixels(u,t,e.zoom,e.penColor)}static colorSwap(e,t,n,r){const i=t.getImageData(n*e.zoom,r*e.zoom,1,1).data,o=t.getImageData(0,0,e.width*e.zoom,e.width*e.zoom);let s=255;const[a,l,c,d]=[i[0],i[1],i[2],i[3]];let p;d===s&&(s=200);const u=[];for(let t=0;t<e.width;t+=1)for(let n=0;n<e.height;n+=1)p=4*(n*e.width*e.zoom*e.zoom+t*e.zoom),this.matchStartColor(p,o,a,l,c,d)&&u.push({x1:t,y1:n});this.fillPixels(u,t,e.zoom,e.penColor)}static mirrorCoords(e,t){const n=[];return e.forEach(e=>{const r=t-(e.x1+1);r!==e.x1&&n.push({x1:r,y1:e.y1})}),n.concat(e)}static updateCursorCoordinates(e){document.querySelector(".cursor-coordinates").innerText=`[${e.width}x${e.width}]  `}static RGBAtoHEX(e,t,n){let r=e.toString(16),i=t.toString(16),o=n.toString(16);return 1===r.length&&(r=`0${r}`),1===i.length&&(i=`0${i}`),1===o.length&&(o=`0${o}`),`#${r}${i}${o}`}static getColorFromPixel(e,t,n,r){const i=t.getImageData(n*e.zoom,r*e.zoom,1,1).data,[o,s,a]=[i[0],i[1],i[2]];return this.RGBAtoHEX(o,s,a)}}class s{constructor(e){this.model=e,this.html=i,this.utils=o}render(){const e=document.createElement("template");return e.innerHTML=this.html,e.content}changeTool(e){if(e.target.classList.contains("tool-icon")){this.model.currentTool=e.target.dataset.toolId,this.utils.deleteClassFromItems("tool-icon","selected"),e.target.classList.add("selected");const t=document.querySelector(".drawing-canvas"),n=document.querySelector(".helper-canvas");switch(this.model.currentTool){case"tool-pen":o.removeClassesWithRegex(t,/-cursor/),t.classList.add("pen-cursor");break;case"tool-bucket":case"tool-solorswap":o.removeClassesWithRegex(t,/-cursor/),t.classList.add("bucket-cursor");break;case"tool-eraser":o.removeClassesWithRegex(t,/-cursor/),t.classList.add("eraser-cursor");break;case"tool-vertical-mirror-pen":o.removeClassesWithRegex(t,/-cursor/),t.classList.add("pen-cursor");break;case"tool-stroke":o.removeClassesWithRegex(t,/-cursor/),o.removeClassesWithRegex(n,/-cursor/),t.classList.add("pen-cursor"),n.classList.add("pen-cursor");break;case"tool-colorpicker":o.removeClassesWithRegex(t,/-cursor/),t.classList.add("colorpicker-cursor")}}}init(){document.querySelector(".tools-wrapper").addEventListener("pointerup",this.changeTool.bind(this)),document.addEventListener("pointerup",()=>{if("tool-stroke"===this.model.currentTool&&this.model.getCanvasDrawStatus()){this.model.startStrokeX=void 0,this.model.startStrokeY=void 0,document.querySelector(".helper-canvas").style.zIndex="8";const e=document.querySelector(".drawing-canvas").getContext("2d");document.querySelector(".helper-canvas").getContext("2d").clearRect(0,0,this.model.width*this.model.zoom,this.model.height*this.model.zoom),o.fillPixels(this.model.pixelsToFill,e,this.model.getZoom(),this.model.getColor()),this.model.pixelsToFill=void 0,this.model.setCanvasDrawStatus(!1),this.model.prevX=void 0,this.model.prevY=void 0}})}canvasDownEventHandler(e){this.model.setCanvasDrawStatus(!0);const t=document.querySelector(".drawing-canvas"),n=t.getContext("2d"),r=document.querySelector(".helper-canvas").getContext("2d");n.imageSmoothingEnabled=!1;const i=t.getBoundingClientRect(),s=this.model.getZoom(),a=Math.floor((e.clientX-i.left)/s),l=Math.floor((e.clientY-i.top)/s);if("tool-pen"===this.model.currentTool&&o.drawCell({x1:a,y1:l},n,s,this.model.getColor()),"tool-eraser"===this.model.currentTool&&o.eraseCell({x1:a,y1:l},n,s),"tool-bucket"===this.model.currentTool&&o.floodFill(this.model,n,a,l),"tool-solorswap"===this.model.currentTool&&o.colorSwap(this.model,n,a,l),"tool-vertical-mirror-pen"===this.model.currentTool){const e=o.mirrorCoords([{x1:a,y1:l}],this.model.width);o.fillPixels(e,n,s,this.model.getColor())}if("tool-colorpicker"===this.model.currentTool){const e=o.getColorFromPixel(this.model,n,a,l);this.model.penColor=e,document.getElementById("color-primary").value=e}"tool-stroke"===this.model.currentTool&&(this.model.startStrokeX=a,this.model.startStrokeY=l,document.querySelector(".helper-canvas").style.zIndex="10",o.drawCell({x1:a,y1:l},r,s,this.model.getColor()))}canvasUpEventHandler(){if(this.model.getCanvasDrawStatus()){this.model.setCanvasDrawStatus(!1);const e=document.querySelector(".drawing-canvas");this.model.frames[this.model.getCurrentFrame()]=e.toDataURL();const t=document.querySelectorAll(`[data-tile-number='${this.model.getCurrentFrame()}']`)[0].querySelector(".tile-view").getContext("2d");t.imageSmoothingEnabled=!1,t.clearRect(0,0,96,96),t.drawImage(e,0,0,96,96),0===this.model.fps&&o.changePreviewBackground(this.model.frames[this.model.currentFrame]),this.model.prevX=void 0,this.model.prevY=void 0}}canvasMoveEventHandler(e){if(this.model.getCanvasDrawStatus()){const t=document.querySelector(".drawing-canvas"),n=t.getContext("2d"),r=document.querySelector(".helper-canvas").getContext("2d"),i=t.getBoundingClientRect(),s=this.model.getZoom();let a=Math.floor((e.clientX-i.left)/s);const l=Math.floor((e.clientY-i.top)/s);if(this.model.currentX=a,this.model.currentY=l,this.model.getCanvasDrawStatus()){if(this.model.prevX>=0){const e=o.calcStraightLine({startX:this.model.prevX,startY:this.model.prevY,endX:a,endY:l});if("tool-pen"===this.model.currentTool&&o.fillPixels(e,n,s,this.model.getColor()),"tool-eraser"===this.model.currentTool&&o.eraseLine(e,n,s),"tool-vertical-mirror-pen"===this.model.currentTool){const e=o.mirrorCoords([{x1:a,y1:l}],this.model.width);o.fillPixels(e,n,s,this.model.getColor())}if("tool-stroke"===this.model.currentTool){a<0&&(a=0);const e=o.calcStraightLine({startX:this.model.startStrokeX,startY:this.model.startStrokeY,endX:a,endY:l});this.model.pixelsToFill&&o.eraseLine(this.model.pixelsToFill,r,s),this.model.pixelsToFill=e,o.fillPixels(this.model.pixelsToFill,r,s,this.model.getColor())}}this.model.prevX=a,this.model.prevY=l}}}}var a=n(7),l=(n(22),n(3));class c{constructor(e){this.html=a,this.tile=l,this.model=e,this.dragTile=void 0,this.dragDropHandler=this.dragDropTile.bind(this),this.prevTileY=void 0,this.prevClientY=void 0,this.tileProxy=!1,this.tileOrderShift=0,this.shiftX=10,this.dragTileNumber=void 0,this.previousTileNumber=void 0}renderTile(){return o.htmlToDocFragment(this.tile)}render(){const e=o.htmlToDocFragment(this.html);return e.querySelector(".preview-list").prepend(this.renderTile()),e}dragDropTile(e){const t=this.prevTileY+(e.clientY-this.prevClientY);if(this.dragTile.style=`width: 96px; height: 96px; position: absolute; top:${t}px; z-index: 2000;`,this.tileProxy||(this.dragTile.insertAdjacentHTML("beforebegin",'<li class="preview-tile preview-tile-drop-proxy"></li>'),this.tileProxy=!0),this.dragTile.style.visibility="hidden",document.elementFromPoint(this.dragTile.getBoundingClientRect().left+10,e.clientY)){const t=document.elementFromPoint(this.dragTile.getBoundingClientRect().left+10,e.clientY);if(t.closest(".preview-tile")){const e=t.closest(".preview-tile");if(!e.classList.contains("preview-tile-drop-proxy")){const t=Number(e.dataset.tileNumber),n=document.querySelector(".preview-list"),r=n.querySelector(".preview-tile-drop-proxy");this.previousTileNumber>t?(this.tileOrderShift-=1,n.insertBefore(r,e)):this.previousTileNumber<t?(this.tileOrderShift+=1,n.insertBefore(r,e.nextElementSibling)):this.previousTileNumber===t&&(this.tileOrderShift>0?(this.tileOrderShift-=1,n.insertBefore(r,e)):(this.tileOrderShift+=1,n.insertBefore(r,e.nextElementSibling))),this.previousTileNumber=t}}}this.dragTile.style=`width: 96px; height: 96px; position: absolute; top:${t}px; z-index: 2000;`,this.prevTileY=t,this.prevClientY=e.clientY}prepareDragDrop(e){if(e.target.closest(".tile-view")){this.dragTile=e.target.closest(".preview-tile"),this.model.tileClicked=this.dragTile,this.dragTileNumber=Number(this.dragTile.dataset.tileNumber),this.previousTileNumber=this.dragTileNumber;const t=e.clientY-this.dragTile.getBoundingClientRect().top+document.querySelector(".preview-list").getBoundingClientRect().top;this.prevTileY=e.clientY-t,this.prevClientY=e.clientY,this.model.dragTile=!0,document.addEventListener("pointermove",this.dragDropHandler)}}finishDragDrop(){if(this.model.dragTile){if(document.removeEventListener("pointermove",this.dragDropHandler),document.querySelector(".preview-tile-drop-proxy")){const e=document.querySelector(".preview-tile-drop-proxy"),t=document.querySelector(".preview-list"),n=this.dragTileNumber+this.tileOrderShift;this.dragTile.style="position: relative; z-index: 1; top: 0px; left: 0px;",t.insertBefore(this.dragTile,e),e.remove(),this.dragTileNumber!==n&&(o.reorderFrames(this.model,this.dragTileNumber,n),o.renumberTiles(void 0,"reorder"))}this.dragTile=void 0,this.prevTileY=void 0,this.prevClientY=void 0,this.model.dragTile=!1,this.tileProxy=!1,this.tileOrderShift=0,this.dragTileNumber=void 0,this.previousTileNumber=void 0}}init(){document.querySelector(".preview-list").addEventListener("pointerdown",this.prepareDragDrop.bind(this)),document.addEventListener("pointerup",this.finishDragDrop.bind(this))}addTileToPreviewList(){const e=document.querySelector(".preview-list");let t=o.htmlToDocFragment(l);e.insertBefore(t,e.lastElementChild),o.deleteClassFromItems("preview-tile","selected"),(t=e.lastElementChild.previousElementSibling).classList.add("selected"),this.model.frames.push(this.model.emptyImage),t.setAttribute("data-tile-number",this.model.frames.length-1),this.model.setCurrentFrame(this.model.frames.length-1),o.redrawMainCanvas(this.model,this.model.getCurrentFrame()),0===this.model.fps&&o.changePreviewBackground(this.model.frames[this.model.currentFrame])}deleteTileFromPreviewList(e){if(!this.model.dragTile&&e.target.closest(".delete-frame-action")&&document.querySelector(".preview-list").childElementCount>2){const t=e.target.closest(".preview-tile"),n=Number(t.dataset.tileNumber);if(this.model.frames.splice(n,1),t.classList.contains("selected")){const e=t.previousElementSibling;e?(e.classList.add("selected"),this.model.setCurrentFrame(this.model.getCurrentFrame()-1),o.redrawMainCanvas(this.model,n-1),0===this.model.fps&&o.changePreviewBackground(this.model.frames[this.model.currentFrame])):(o.deleteClassFromItems("preview-tile","selected"),t.nextElementSibling.classList.add("selected"),o.redrawMainCanvas(this.model,n+1),0===this.model.fps&&o.changePreviewBackground(this.model.frames[this.model.currentFrame]))}else n<this.model.getCurrentFrame()&&(0===this.model.fps&&o.changePreviewBackground(this.model.frames[this.model.currentFrame]),this.model.setCurrentFrame(this.model.getCurrentFrame()-1));o.renumberTiles(n,"less"),t.remove()}else e.target.closest(".delete-frame-action")&&document.querySelector(".preview-list").childElementCount<=2&&e.target.closest(".delete-frame-action").blur()}duplicateTileFromPreviewList(e){if(!this.model.dragTile&&e.target.closest(".duplicate-frame-action")){const t=document.querySelector(".preview-list"),n=e.target.closest(".preview-tile"),r=Number(n.dataset.tileNumber),i=n.cloneNode(!0);this.model.frames.splice(r+1,0,this.model.frames[r]),o.renumberTiles(r,"more"),i.setAttribute("data-tile-number",r+1),o.deleteClassFromItems("preview-tile","selected"),i.classList.add("selected"),this.model.setCurrentFrame(r+1),t.insertBefore(i,e.target.closest(".preview-tile").nextSibling),o.redrawMainCanvas(this.model,this.model.getCurrentFrame()-1),o.copyCanvasToPreview(this.model),e.target.closest(".duplicate-frame-action").blur(),0===this.model.fps&&o.changePreviewBackground(this.model.frames[this.model.currentFrame])}}selectTileOnClick(e){if(this.model.tileClicked||e.target.closest(".tile-view")){let t;(t=this.model.tileClicked?this.model.tileClicked:e.target.closest(".preview-tile")).classList.contains("selected")||(o.deleteClassFromItems("preview-tile","selected"),t.classList.add("selected"),this.model.setCurrentFrame(Number(t.dataset.tileNumber)),o.redrawMainCanvas(this.model,this.model.getCurrentFrame()),0===this.model.fps&&o.changePreviewBackground(this.model.frames[this.model.currentFrame])),this.model.tileClicked=void 0}}}var d=n(4);n(26);class p{static createCanvas(e,t,n){const r=document.createElement("canvas");return r.classList.add(...n),r.width=e,r.height=t,r}}class u{constructor(){this.html=d}static render(e){const t=e.getWidth()*e.getZoom(),n=e.getHeight()*e.getZoom(),r=o.htmlToDocFragment(d),i=p.createCanvas(t,n,["canvas","drawing-canvas","pen-cursor"]),s=p.createCanvas(t,n,["canvas","helper-canvas","pen-cursor"]);return r.querySelector(".drawing-canvas-container").prepend(i),r.querySelector(".drawing-canvas-container").prepend(s),o.resizeCanvasBackground(r,t,n),r}}var h=n(8);n(29);class m{constructor(e){this.html=h,this.model=e}render(){return o.htmlToDocFragment(this.html)}animatePreview(){const e=this.model;let t=this.model.currentFrame;this.model.animationIntervalId&&clearInterval(this.model.animationIntervalId),0===this.model.fps?o.changePreviewBackground(this.model.frames[this.model.currentFrame]):this.model.animationIntervalId=setInterval(function(){o.changePreviewBackground(function(){(t+=1)>=e.frames.length&&(t=0);let n=e.frames[t];return"string"!=typeof n&&(n=e.emptyImage),n}())},1e3/this.model.fps)}updateFpsOnPreviewWindow(e){document.querySelector("#display-fps").textContent=`${e.target.value} FPS`,this.model.fps=Number(e.target.value)}static openPreviewFullScreen(){document.querySelector(".preview-canvas-container").requestFullscreen()}}n(33);var v=n(9);n(36);class g{constructor(e){this.utils=o,this.model=e}static createIcon(){const e=document.createElement("div");return e.classList.add("settings-icon","icon-settings-resize"),e.dataset.settings="resize",e}static renderSidePanel(){return o.htmlToDocFragment(v)}static resizeCanvases(e,t){const n=document.getElementById("canvas-resize"),r=document.querySelector(".drawing-canvas"),i=document.querySelector(".helper-canvas"),s=document.querySelector(".drawing-canvas-container"),a=r.getContext("2d"),l=new Image;l.src=e.frames[e.currentFrame],t.preventDefault(),e.setWidth(n.canvasSize.value),e.setHeight(n.canvasSize.value),e.setZoom(),n.reset(),o.hideSettingsPanel(t,!0),r.width=e.getWidth()*e.getZoom(),r.height=e.getHeight()*e.getZoom(),i.width=e.getWidth()*e.getZoom(),i.height=e.getHeight()*e.getZoom(),o.resizeCanvasBackground(s,r.width,r.height),a.drawImage(l,0,0,r.width,r.height),o.updateCursorCoordinates(e)}}class f{constructor(e){this.model=e,this.utils=o,this.fragment=document.createDocumentFragment(),this.resize=new g(this.model)}renderIcons(){return this.fragment.append(g.createIcon()),this.fragment}renderSettingsPanel(e){document.addEventListener("pointerup",o.hideSettingsPanel);const t=document.querySelector(".drawer");if("resize"===e.target.dataset.settings){for(e.target.classList.add("has-expanded-drawer");t.firstChild;)t.removeChild(t.firstChild);t.appendChild(g.renderSidePanel()),document.querySelector(`#width${this.model.width}`).setAttribute("checked","checked"),document.querySelector("#canvas-resize").addEventListener("submit",g.resizeCanvases.bind(null,this.model)),document.querySelector(".right-sticky-section").classList.add("expanded")}}}var w=n(10);n(38);class b{constructor(e){this.html=w,this.model=e}render(){return o.htmlToDocFragment(this.html)}updateCurrentColor(e){const t=e.target.value;this.model.setColor(t)}swapColors(){const e=document.getElementById("color-primary"),t=document.getElementById("color-secondary");this.model.setColor(t.value),t.value=e.value,e.value=this.model.getColor()}init(){document.getElementById("color-primary").addEventListener("change",this.updateCurrentColor.bind(this)),document.querySelector(".swap-color-button").addEventListener("pointerup",this.swapColors.bind(this))}}n(41);class x{constructor(e){this.model=e}render(){const e=document.createElement("div");return e.classList.add("cursor-coordinates"),e.innerText=`[${this.model.width}x${this.model.width}]  `,e}init(){const e=document.querySelector(".drawing-canvas"),t=document.querySelector(".cursor-coordinates");e.addEventListener("pointerout",()=>{t.innerText=`[${this.model.width}x${this.model.width}]  `}),e.addEventListener("pointermove",()=>{t.innerText=`[${this.model.width}x${this.model.width}] ${this.model.currentX}:${this.model.currentY}`})}}class y{constructor(e){this.model=e,this.html=r,this.previewList=new c(this.model),this.tools=new s(this.model),this.canvas=new u,this.preview=new m(this.model),this.settings=new f(this.model),this.colorPicker=new b(this.model),this.cursorCoordinates=new x(this.model)}init(){const e=o.htmlToDocFragment(this.html);document.body.style.visibility="hidden",document.body.append(e),this.model.setZoom(),document.querySelector(".left-sticky-section .vertical-center").append(this.tools.render()),document.querySelector(".left-sticky-section .vertical-center").append(this.colorPicker.render()),document.querySelector(".main .left-column").append(this.previewList.render()),document.querySelector(".main .main-column").append(u.render(this.model)),document.querySelector(".main .right-column").append(this.preview.render()),document.querySelector(".main .right-column").append(this.cursorCoordinates.render()),document.querySelector(".settings-icons").append(this.settings.renderIcons()),this.preview.animatePreview(),this.colorPicker.init(),this.tools.init(),this.previewList.init(),this.cursorCoordinates.init(),document.body.style.visibility=""}addEventListeners(){document.querySelector(".add-frame-action").addEventListener("pointerup",this.previewList.addTileToPreviewList.bind(this)),document.querySelector(".preview-list").addEventListener("pointerup",this.previewList.deleteTileFromPreviewList.bind(this)),document.querySelector(".preview-list").addEventListener("pointerup",this.previewList.duplicateTileFromPreviewList.bind(this)),document.querySelector(".drawing-canvas").addEventListener("pointerdown",this.tools.canvasDownEventHandler.bind(this)),document.addEventListener("pointerup",this.tools.canvasUpEventHandler.bind(this)),document.addEventListener("pointermove",this.tools.canvasMoveEventHandler.bind(this)),document.addEventListener("pointerup",this.previewList.selectTileOnClick.bind(this)),document.querySelector("#preview-fps").addEventListener("input",this.preview.updateFpsOnPreviewWindow.bind(this)),document.querySelector("#preview-fps").addEventListener("input",this.preview.animatePreview.bind(this)),document.querySelector(".settings-icons").addEventListener("pointerup",this.settings.renderSettingsPanel.bind(this))}static addEventListeners2(){document.querySelector(".preview-fullscreen-icon").addEventListener("pointerup",m.openPreviewFullScreen)}}var C={DEFAULT:{WIDTH:32,HEIGHT:32,FPS:12},DEFAULT_PEN_COLOR:"#000000",TRANSPARENT_COLOR:"rgba(0, 0, 0, 0)",TOOL_HIGHLIGHT_COLOR_LIGHT:"rgba(255, 255, 255, 0.2)",MOUSEMOVE_THROTTLING:10};const k=new y(new class{constructor(){const{DEFAULT:{WIDTH:e,HEIGHT:t,FPS:n},DEFAULT_PEN_COLOR:r}=C;this.currentTool="tool-pen",this.width=e,this.height=t,this.zoom=1,this.penColor=r,this.canvasDraw=!1,this.currentFrame=0,this.emptyImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",this.frames=[this.emptyImage],this.fps=n,this.animationIntervalId=void 0,this.prevX=void 0,this.prevY=void 0,this.startStrokeX=void 0,this.startStrokeY=void 0,this.pixelsToFill=void 0,this.tileClicked=void 0,this.currentX=0,this.currentY=0}getWidth(){return this.width}setWidth(e){this.width=e}getHeight(){return this.height}setHeight(e){this.height=e}getZoom(){return this.zoom}setZoom(){this.zoom=o.calculateZoom(this.width,this.height)}getColor(){return this.penColor}setColor(e){this.penColor=e}getCanvasDrawStatus(){return this.canvasDraw}setCanvasDrawStatus(e){this.canvasDraw=e}setCurrentFrame(e){this.currentFrame=e}getCurrentFrame(){return this.currentFrame}});k.init(),k.addEventListeners(),y.addEventListeners2()}]);
//# sourceMappingURL=app.bundle.js.map